$(document).on("ready page:load",function(){$("#country_id").change(function(){$("#country_id option:selected").text();$("#state_name").html(""),e("/find_states",$("#country_id").val())});var e=function(e,a){$.ajax({url:e,type:"post",dataType:"json",cache:!1,data:{country_id:a},success:function(e){t(e)}})},t=function(e){if(0===e.length)$html="<input id='state_name' name="+name+" class="+class_name+" type='text' value='' />";else{name=$("#state_name").attr("name"),class_name=$("#state_name").attr("class"),$html="<select class="+class_name+' id="state_name" name='+name+" >",$html+='<option selected="selected" >'+e[0][1]+"</option>";for(var t=1;t<e.length;t++)$html+="<option>"+e[t][1]+"</option>";$html+="</select>"}$("#state_name").replaceWith($html),"chosen-select"===class_name&&e.length>0&&$("."+class_name).chosen()}});