function CountryStateSelect(t){function e(){l(),c(),o(),$("#"+_).change(function(){return f($(this).val())})}function n(){$("#"+y).change(function(){return p($("#"+y).val(),$("#"+_).val())})}function c(){r&&a()&&$("#"+y).chosen()}function o(){r&&s()&&$("#"+g).chosen()}function a(){return!$("#"+y).is("[type=text]")}function s(){return!$("#"+g).is("[type=text]")}function l(){r&&$("#"+_).chosen()}function u(){r&&$("#"+t.state_id+"_chosen").remove()}function h(){r&&$("#"+t.city_id+"_chosen").remove()}function r(){return t.hasOwnProperty("chosen_ui")&&t.chosen_ui}function f(t){u(),$.ajax({url:"/find_states",type:"post",dataType:"json",cache:!1,data:{country_id:t},success:function(t){d(t)}})}function p(t,e){h(),$.ajax({url:"/find_cities",type:"post",dataType:"json",cache:!1,data:{country_id:e,state_id:t},success:function(t){m(t)}})}function d(t){if(0===t.length)html='<input id="'+y+'" name="'+v+'" class="'+x+'" type="text"  type="text" value="" >';else{for(html='<select id="'+y+'" name="'+v+'" class="'+x+'" >',i=0;i<t.length;i++)html+="<option value="+t[i][0]+">"+t[i][1]+"</option>";html+="</select>"}$("#"+y).replaceWith(html),t.length>0&&c(),"undefined"!=typeof j&&n()}function m(t){if(console.log(t),0===t.length)html='<input id="'+g+'" name="'+j+'" class="'+S+'" type="text"  type="text" value="" >';else{for(html='<select id="'+g+'" name="'+j+'" class="'+S+'" >',i=0;i<t.length;i++)html+="<option>"+t[i]+"</option>";html+="</select>"}$("#"+g).replaceWith(html),t.length>0&&o()}var y=t.state_id,_=t.country_id,g=t.city_id,v=$("#"+y).attr("name"),x=$("#"+y).attr("class"),j=$("#"+g).attr("name"),S=$("#"+g).attr("class");return e()}